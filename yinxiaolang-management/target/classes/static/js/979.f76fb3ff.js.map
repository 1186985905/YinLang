{"version":3,"file":"js/979.f76fb3ff.js","mappings":"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","sources":["webpack://agentui/./src/views/admin/UserManagement.vue","webpack://agentui/src/views/admin/UserManagement.vue","webpack://agentui/./src/views/admin/UserManagement.vue?48ed","webpack://agentui/./src/views/admin/UserManagement.vue?daee"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-management\"},[_c('h1',[_vm._v(\" 用户管理 \"),_c('div',{staticClass:\"header-buttons\"},[_c('el-button',{attrs:{\"type\":\"default\",\"size\":\"small\",\"icon\":\"el-icon-back\"},on:{\"click\":_vm.goToAdminPanel}},[_vm._v(\"返回管理面板\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-s-home\"},on:{\"click\":_vm.goToHome}},[_vm._v(\"返回主页\")])],1)]),_c('div',{staticClass:\"search-form\"},[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\",\"clearable\":\"\"},model:{value:(_vm.searchForm.username),callback:function ($$v) {_vm.$set(_vm.searchForm, \"username\", $$v)},expression:\"searchForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"部门\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择部门\",\"clearable\":\"\"},model:{value:(_vm.searchForm.departmentId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"departmentId\", $$v)},expression:\"searchForm.departmentId\"}},_vm._l((_vm.departmentMap),function(name,id){return _c('el-option',{key:id,attrs:{\"label\":name,\"value\":Number(id)}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"权限\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择权限\",\"clearable\":\"\"},model:{value:(_vm.searchForm.role),callback:function ($$v) {_vm.$set(_vm.searchForm, \"role\", $$v)},expression:\"searchForm.role\"}},[_c('el-option',{attrs:{\"label\":\"超级管理员\",\"value\":\"SUPER_ADMIN\"}}),_c('el-option',{attrs:{\"label\":\"普通用户\",\"value\":\"NORMAL_USER\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"创建时间\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"clearable\":\"\"},model:{value:(_vm.searchForm.timeRange),callback:function ($$v) {_vm.$set(_vm.searchForm, \"timeRange\", $$v)},expression:\"searchForm.timeRange\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showCreateDialog}},[_vm._v(\"+ 创建新用户\")])],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\"}}),_c('el-table-column',{attrs:{\"prop\":\"departmentId\",\"label\":\"所属部门\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.getDepartmentName(scope.row.departmentId))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"role\",\"label\":\"权限\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.role === 'SUPER_ADMIN' ? 'danger' : ''}},[_vm._v(\" \"+_vm._s(_vm.getRoleName(scope.row.role))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createdAt\",\"label\":\"创建时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.formatDateTime(scope.row.createdAt))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"disabled\":scope.row.role === 'SUPER_ADMIN'},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"disabled\":scope.row.role === 'SUPER_ADMIN'},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total,\"page-size\":_vm.searchForm.pageSize,\"current-page\":_vm.searchForm.page,\"page-sizes\":[10, 20, 50]},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.searchForm, \"page\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.searchForm, \"page\", $event)},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogType === 'create' ? '创建新用户' : '编辑用户',\"visible\":_vm.dialogVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"userFormRef\",attrs:{\"model\":_vm.userForm,\"rules\":_vm.userFormRules,\"label-width\":\"100px\"}},[(_vm.dialogType === 'create')?_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.userForm.username),callback:function ($$v) {_vm.$set(_vm.userForm, \"username\", $$v)},expression:\"userForm.username\"}})],1):_vm._e(),(_vm.dialogType === 'create')?_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"show-password\":\"\"},model:{value:(_vm.userForm.password),callback:function ($$v) {_vm.$set(_vm.userForm, \"password\", $$v)},expression:\"userForm.password\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"所属部门\",\"prop\":\"departmentId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择部门\"},model:{value:(_vm.userForm.departmentId),callback:function ($$v) {_vm.$set(_vm.userForm, \"departmentId\", $$v)},expression:\"userForm.departmentId\"}},_vm._l((_vm.departmentMap),function(name,id){return _c('el-option',{key:id,attrs:{\"label\":name,\"value\":Number(id)}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"权限\",\"prop\":\"role\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择权限\"},model:{value:(_vm.userForm.role),callback:function ($$v) {_vm.$set(_vm.userForm, \"role\", $$v)},expression:\"userForm.role\"}},[_c('el-option',{attrs:{\"label\":\"超级管理员\",\"value\":\"SUPER_ADMIN\"}}),_c('el-option',{attrs:{\"label\":\"普通用户\",\"value\":\"NORMAL_USER\"}})],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-management\">\n    <h1>\n      用户管理\n      <div class=\"header-buttons\">\n        <el-button type=\"default\" size=\"small\" icon=\"el-icon-back\" @click=\"goToAdminPanel\">返回管理面板</el-button>\n        <el-button type=\"primary\" size=\"small\" icon=\"el-icon-s-home\" @click=\"goToHome\">返回主页</el-button>\n      </div>\n    </h1>\n\n    <!-- 搜索表单 -->\n    <div class=\"search-form\">\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"demo-form-inline\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"searchForm.username\" placeholder=\"请输入用户名\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"部门\">\n          <el-select v-model=\"searchForm.departmentId\" placeholder=\"请选择部门\" clearable>\n            <el-option v-for=\"(name, id) in departmentMap\" \n              :key=\"id\" \n              :label=\"name\" \n              :value=\"Number(id)\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"权限\">\n          <el-select v-model=\"searchForm.role\" placeholder=\"请选择权限\" clearable>\n            <el-option label=\"超级管理员\" value=\"SUPER_ADMIN\"></el-option>\n            <el-option label=\"普通用户\" value=\"NORMAL_USER\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"创建时间\">\n          <el-date-picker\n            v-model=\"searchForm.timeRange\"\n            type=\"datetimerange\"\n            range-separator=\"至\"\n            start-placeholder=\"开始时间\"\n            end-placeholder=\"结束时间\"\n            format=\"yyyy-MM-dd HH:mm:ss\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            clearable>\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\n          <el-button @click=\"resetSearch\">重置</el-button>\n          <el-button type=\"primary\" @click=\"showCreateDialog\">+ 创建新用户</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n      \n    <!-- 用户列表 -->\n    <el-table :data=\"userList\" style=\"width: 100%\" v-loading=\"loading\">\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n      <el-table-column prop=\"departmentId\" label=\"所属部门\">\n          <template slot-scope=\"scope\">\n          {{ getDepartmentName(scope.row.departmentId) }}\n          </template>\n        </el-table-column>\n      <el-table-column prop=\"role\" label=\"权限\">\n          <template slot-scope=\"scope\">\n          <el-tag :type=\"scope.row.role === 'SUPER_ADMIN' ? 'danger' : ''\">\n            {{ getRoleName(scope.row.role) }}\n          </el-tag>\n          </template>\n        </el-table-column>\n      <el-table-column prop=\"createdAt\" label=\"创建时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.createdAt) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button\n            size=\"small\" \n              type=\"primary\"\n              @click=\"handleEdit(scope.row)\"\n            :disabled=\"scope.row.role === 'SUPER_ADMIN'\">编辑</el-button>\n            <el-button\n            size=\"small\" \n              type=\"danger\"\n              @click=\"handleDelete(scope.row)\"\n            :disabled=\"scope.row.role === 'SUPER_ADMIN'\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n    <!-- 分页 -->\n    <div class=\"pagination\">\n        <el-pagination\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        :page-size=\"searchForm.pageSize\"\n        :current-page.sync=\"searchForm.page\"\n        :page-sizes=\"[10, 20, 50]\"\n          @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\">\n        </el-pagination>\n      </div>\n\n    <!-- 创建/编辑用户对话框 -->\n    <el-dialog\n      :title=\"dialogType === 'create' ? '创建新用户' : '编辑用户'\"\n      :visible.sync=\"dialogVisible\"\n      width=\"500px\">\n      <el-form \n        :model=\"userForm\" \n        :rules=\"userFormRules\" \n        ref=\"userFormRef\"\n        label-width=\"100px\">\n        <el-form-item label=\"用户名\" prop=\"username\" v-if=\"dialogType === 'create'\">\n          <el-input v-model=\"userForm.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"dialogType === 'create'\">\n          <el-input v-model=\"userForm.password\" type=\"password\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"所属部门\" prop=\"departmentId\">\n          <el-select v-model=\"userForm.departmentId\" placeholder=\"请选择部门\">\n            <el-option v-for=\"(name, id) in departmentMap\" \n              :key=\"id\" \n              :label=\"name\" \n              :value=\"Number(id)\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"权限\" prop=\"role\">\n          <el-select v-model=\"userForm.role\" placeholder=\"请选择权限\">\n            <el-option label=\"超级管理员\" value=\"SUPER_ADMIN\"></el-option>\n            <el-option label=\"普通用户\" value=\"NORMAL_USER\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getUserList, createUser, updateUser, deleteUser } from '@/api/user'\n\nexport default {\n  name: 'UserManagement',\n  data() {\n    return {\n      loading: false,\n      userList: [],\n      total: 0,\n      dialogVisible: false,\n      dialogType: 'create',\n      searchForm: {\n        username: '',\n        departmentId: null,\n        role: null,\n        timeRange: [],\n        page: 1,\n        pageSize: 10\n      },\n      userForm: {\n        username: '',\n        password: '',\n        departmentId: null,\n        role: 'NORMAL_USER'\n      },\n      userFormRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n        departmentId: [\n          { required: true, message: '请选择部门', trigger: 'change' }\n        ],\n        role: [\n          { required: true, message: '请选择权限', trigger: 'change' }\n        ]\n      },\n      departmentMap: {\n        1: '研发部-前端组',\n        2: '研发部-后端组',\n        3: '产品部',\n        4: '市场部',\n        5: '管理部'\n      }\n    }\n  },\n  created() {\n    this.fetchUserList()\n  },\n  methods: {\n    async fetchUserList() {\n      this.loading = true\n      try {\n        const response = await getUserList({\n          ...this.searchForm,\n          page: this.searchForm.page,\n          pageSize: this.searchForm.pageSize\n        })\n        \n        if (response && response.list) {\n          this.userList = response.list.map(user => ({\n            ...user,\n            createdAt: user.createdAt ? new Date(user.createdAt).toLocaleString('zh-CN') : ''\n          }))\n          this.total = response.total\n        } else {\n          this.userList = []\n          this.total = 0\n          this.$message.warning('暂无数据')\n        }\n      } catch (error) {\n        console.error('获取用户列表失败:', error)\n        this.$message.error('获取用户列表失败，请检查网络连接')\n        this.userList = []\n        this.total = 0\n      } finally {\n        this.loading = false\n      }\n    },\n    handleSearch() {\n      this.searchForm.page = 1\n      this.fetchUserList()\n    },\n    resetSearch() {\n      this.searchForm = {\n        username: '',\n        departmentId: null,\n        role: null,\n        timeRange: [],\n        page: 1,\n        pageSize: 10\n      }\n      this.fetchUserList()\n    },\n    showCreateDialog() {\n      this.dialogType = 'create'\n      this.userForm = {\n        username: '',\n        password: '',\n        departmentId: null,\n        role: 'NORMAL_USER'\n      }\n      this.dialogVisible = true\n      this.$nextTick(() => {\n        this.$refs.userFormRef?.resetFields()\n      })\n    },\n    handleEdit(row) {\n      this.dialogType = 'edit'\n      this.userForm = {\n        id: row.id,\n        departmentId: row.departmentId,\n        role: row.role\n      }\n      this.dialogVisible = true\n    },\n    async handleSubmit() {\n      if (!this.$refs.userFormRef) return\n      \n      try {\n        await this.$refs.userFormRef.validate()\n        \n        if (this.dialogType === 'create') {\n          await createUser(this.userForm)\n          this.$message.success('创建成功')\n        } else {\n          const { id, departmentId, role } = this.userForm\n          await updateUser(id, { departmentId, role })\n          this.$message.success('更新成功')\n        }\n        \n        this.dialogVisible = false\n        this.fetchUserList()\n      } catch (error) {\n        console.error('操作失败:', error)\n        this.$message.error(error.response?.data?.message || '操作失败')\n      }\n    },\n    handleDelete(row) {\n      this.$confirm('确认删除该用户吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await deleteUser(row.id)\n          this.$message.success('删除成功')\n          this.fetchUserList()\n      } catch (error) {\n          this.$message.error(error.message || '删除失败')\n      }\n      })\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val\n      this.fetchUserList()\n    },\n    handleCurrentChange(val) {\n      this.searchForm.page = val\n      this.fetchUserList()\n    },\n    getDepartmentName(id) {\n      return this.departmentMap[id] || '未知部门'\n    },\n    getRoleName(role) {\n      const roleMap = {\n        'SUPER_ADMIN': '超级管理员',\n        'NORMAL_USER': '普通用户'\n      }\n      return roleMap[role] || role\n    },\n    formatDateTime(datetime) {\n      if (!datetime) return '';\n      const date = new Date(datetime);\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n      });\n    },\n    goToAdminPanel() {\n      this.$router.replace('/admin');\n    },\n    goToHome() {\n      this.$router.replace('/');\n    }\n  }\n}\n</script>\n\n<style>\n.user-management {\n  padding: 20px;\n}\n\nh1 {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  color: #333;\n}\n\n.header-buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.search-form {\n  margin-bottom: 20px;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 4px;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n}\n\n@media screen and (max-width: 768px) {\n  .user-management {\n    padding: 10px;\n  }\n\n  h1 {\n    font-size: 20px;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n\n  .header-buttons {\n    width: 100%;\n    justify-content: flex-start;\n  }\n\n  .header-buttons .el-button {\n    flex: 1;\n  }\n}\n</style> ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserManagement.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserManagement.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserManagement.vue?vue&type=template&id=66829f40\"\nimport script from \"./UserManagement.vue?vue&type=script&lang=js\"\nexport * from \"./UserManagement.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserManagement.vue?vue&type=style&index=0&id=66829f40&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","goToAdminPanel","goToHome","searchForm","model","value","username","callback","$$v","$set","expression","departmentId","_l","departmentMap","name","id","key","Number","role","timeRange","handleSearch","resetSearch","showCreateDialog","directives","rawName","loading","staticStyle","userList","scopedSlots","_u","fn","scope","_s","getDepartmentName","row","getRoleName","formatDateTime","createdAt","$event","handleEdit","handleDelete","total","pageSize","page","handleSizeChange","handleCurrentChange","dialogType","dialogVisible","ref","userForm","userFormRules","_e","password","slot","handleSubmit","staticRenderFns","data","required","message","trigger","min","max","created","fetchUserList","methods","response","getUserList","list","map","user","Date","toLocaleString","$message","warning","error","console","$nextTick","$refs","userFormRef","resetFields","validate","createUser","success","updateUser","$confirm","confirmButtonText","cancelButtonText","type","then","deleteUser","val","roleMap","datetime","date","year","month","day","hour","minute","second","hour12","$router","replace","component"],"sourceRoot":""}