"use strict";(self["webpackChunkagentui"]=self["webpackChunkagentui"]||[]).push([[671],{1671:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-records"},[t("h1",[e._v(" 生成图片查询 "),t("div",{staticClass:"header-buttons"},[t("el-button",{attrs:{type:"default",size:"small",icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回管理面板")]),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-home"},on:{click:e.goHome}},[e._v("返回主页")])],1)]),t("el-card",{staticClass:"filter-card"},[t("el-form",{staticClass:"filter-form",attrs:{inline:!0,model:e.filterForm,size:"small"}},[t("el-form-item",{attrs:{label:"时间范围"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.filterForm.dateRange,callback:function(t){e.$set(e.filterForm,"dateRange",t)},expression:"filterForm.dateRange"}})],1),t("el-form-item",{attrs:{label:"部门"}},[t("el-cascader",{attrs:{options:e.departmentOptions,props:{checkStrictly:!0},clearable:"",placeholder:"请选择部门"},model:{value:e.filterForm.department,callback:function(t){e.$set(e.filterForm,"department",t)},expression:"filterForm.department"}})],1),t("el-form-item",{attrs:{label:"用户"}},[t("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteSearchUsers,loading:e.userSearchLoading,clearable:""},model:{value:e.filterForm.userId,callback:function(t){e.$set(e.filterForm,"userId",t)},expression:"filterForm.userId"}},e._l(e.userOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[t("span",[e._v(e._s(a.name))]),t("span",{staticClass:"user-email"},[e._v(e._s(a.email))])])})),1)],1),t("el-form-item",{attrs:{label:"提示词"}},[t("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.filterForm.prompt,callback:function(t){e.$set(e.filterForm,"prompt",t)},expression:"filterForm.prompt"}})],1),t("el-form-item",{attrs:{label:"风格"}},[t("el-select",{attrs:{placeholder:"请选择风格",clearable:""},model:{value:e.filterForm.style,callback:function(t){e.$set(e.filterForm,"style",t)},expression:"filterForm.style"}},[t("el-option",{attrs:{label:"写实风格",value:"realistic"}}),t("el-option",{attrs:{label:"卡通风格",value:"cartoon"}}),t("el-option",{attrs:{label:"油画风格",value:"oil"}}),t("el-option",{attrs:{label:"水彩风格",value:"watercolor"}}),t("el-option",{attrs:{label:"素描风格",value:"sketch"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.resetFilter}},[e._v("重置")]),t("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportRecords}},[e._v("导出")])],1)],1)],1),t("el-card",{staticClass:"content-card"},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("图片生成列表")]),t("div",{staticClass:"card-controls"},[t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:0===e.selectedImages.length},on:{click:e.handleBatchDelete}},[e._v("批量删除")]),t("el-radio-group",{attrs:{size:"small"},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}},[t("el-radio-button",{attrs:{label:"table"}},[e._v("表格视图")]),t("el-radio-button",{attrs:{label:"grid"}},[e._v("网格视图")])],1)],1)]),"table"===e.viewMode?[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.imageRecords},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"timestamp",label:"生成时间",width:"180",formatter:e.formatDate}}),t("el-table-column",{attrs:{prop:"username",label:"用户",width:"120"}}),t("el-table-column",{attrs:{prop:"department",label:"部门",width:"120"}}),t("el-table-column",{attrs:{prop:"prompt",label:"提示词","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"model",label:"模型",width:"120"}}),t("el-table-column",{attrs:{prop:"style",label:"风格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",[e._v(e._s(e.getStyleText(a.row.style)))])]}}],null,!1,3050494134)}),t("el-table-column",{attrs:{prop:"remainingDays",label:"保存时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.remainingDays)+"天")]),t("el-button",{staticClass:"reset-button",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.resetSaveTime(a.row)}}},[t("i",{staticClass:"el-icon-refresh"})])]}}],null,!1,1376965608)}),t("el-table-column",{attrs:{label:"预览",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.previewImage(a.row)}}},[t("i",{staticClass:"el-icon-picture-outline"}),e._v(" 预览 ")])]}}],null,!1,4113155085)}),t("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.downloadImage(a.row)}}},[t("i",{staticClass:"el-icon-download"}),e._v(" 下载 ")]),t("el-button",{staticClass:"danger",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteImage(a.row)}}},[t("i",{staticClass:"el-icon-delete"}),e._v(" 删除 ")])]}}],null,!1,3170671997)})],1)]:[t("div",{staticClass:"image-grid"},e._l(e.imageRecords,(function(a){return t("div",{key:a.id,staticClass:"image-item"},[t("div",{staticClass:"image-container",on:{click:function(t){return e.previewImage(a)}}},[t("img",{staticClass:"thumbnail",attrs:{src:a.imageUrl,alt:"生成图片"}}),t("div",{staticClass:"image-overlay"},[t("i",{staticClass:"el-icon-zoom-in"})])]),t("div",{staticClass:"image-info"},[t("div",{staticClass:"image-prompt",attrs:{title:a.prompt}},[e._v(e._s(a.prompt))]),t("div",{staticClass:"image-meta"},[t("span",[e._v(e._s(a.username))]),t("span",[e._v(e._s(e.formatDate(null,null,a.timestamp)))])]),t("div",{staticClass:"image-actions"},[t("el-tag",{attrs:{size:"mini",type:e.getStatusType(a.status)}},[e._v(" "+e._s(e.getStatusText(a.status))+" ")]),t("div",{staticClass:"action-buttons"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.downloadImage(a)}}},[t("i",{staticClass:"el-icon-download"})]),t("el-button",{staticClass:"danger",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.deleteImage(a)}}},[t("i",{staticClass:"el-icon-delete"})])],1)],1)])])})),0)],t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[12,24,48,96],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),t("el-dialog",{attrs:{title:e.currentRecord?e.currentRecord.prompt:"图片预览",visible:e.previewVisible,width:"800px",center:""},on:{"update:visible":function(t){e.previewVisible=t}}},[e.currentRecord?t("div",{staticClass:"preview-container"},[t("img",{staticClass:"preview-image",attrs:{src:e.currentRecord.imageUrl,alt:"生成图片"}}),t("div",{staticClass:"preview-info"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("生成时间：")]),t("span",[e._v(e._s(e.formatDate(null,null,e.currentRecord.timestamp)))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("用户：")]),t("span",[e._v(e._s(e.currentRecord.username))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("部门：")]),t("span",[e._v(e._s(e.currentRecord.department))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("模型：")]),t("span",[e._v(e._s(e.currentRecord.model))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("分辨率：")]),t("span",[e._v(e._s(e.currentRecord.resolution))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("状态：")]),t("el-tag",{attrs:{type:e.getStatusType(e.currentRecord.status)}},[e._v(" "+e._s(e.getStatusText(e.currentRecord.status))+" ")])],1),t("div",{staticClass:"info-item full-width"},[t("span",{staticClass:"label"},[e._v("提示词：")]),t("div",{staticClass:"prompt-text"},[e._v(e._s(e.currentRecord.prompt))])])])]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.previewVisible=!1}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadImage(e.currentRecord)}}},[e._v("下载图片")])],1)])],1)},i=[],l=(a(4114),a(8111),a(2489),a(116),a(1701),{name:"ImageRecords",data(){return{loading:!1,userSearchLoading:!1,viewMode:"grid",currentPage:1,pageSize:12,total:0,previewVisible:!1,currentRecord:null,selectedImages:[],filterForm:{dateRange:[],department:[],userId:"",prompt:"",style:""},departmentOptions:[{value:1,label:"研发部",children:[{value:4,label:"前端组"},{value:5,label:"后端组"}]},{value:2,label:"产品部"},{value:3,label:"运营部"}],userOptions:[],imageRecords:[{id:1,timestamp:"2024-03-22 10:15:00",username:"张三",department:"研发部-前端组",prompt:"一只可爱的机器猫，科技风格，未来主义，高清细节",model:"DALL-E 3",resolution:"1024x1024",status:"saved",style:"realistic",remainingDays:22,imageUrl:"https://images.unsplash.com/photo-1560807707-8cc77767d783"},{id:2,timestamp:"2024-03-22 11:30:00",username:"李四",department:"研发部-后端组",prompt:"未来城市全景，霓虹灯，科幻风格，雨天，高楼大厦",model:"Midjourney",resolution:"1792x1024",status:"liked",style:"cartoon",remainingDays:17,imageUrl:"https://images.unsplash.com/photo-1480796927426-f609979314bd"},{id:3,timestamp:"2024-03-22 14:20:00",username:"王五",department:"产品部",prompt:"茵浪AI系统产品展示，高科技，简约设计，专业风格",model:"DALL-E 3",resolution:"1024x1024",status:"saved",style:"oil",remainingDays:28,imageUrl:"https://images.unsplash.com/photo-1535223289827-42f1e9919769"},{id:4,timestamp:"2024-03-23 09:45:00",username:"赵六",department:"市场部",prompt:"商业团队讨论AI技术，办公环境，专业人士，现代办公室",model:"Midjourney",resolution:"1024x1792",status:"liked",style:"realistic",remainingDays:15,imageUrl:"https://images.unsplash.com/photo-1522071820081-009f0129c71c"},{id:5,timestamp:"2024-03-23 13:10:00",username:"张三",department:"研发部-前端组",prompt:"人工智能芯片特写，高科技，微电子，蓝色光效",model:"DALL-E 3",resolution:"1024x1024",status:"deleted",style:"watercolor",remainingDays:24,imageUrl:"https://images.unsplash.com/photo-1518770660439-4636190af475"},{id:6,timestamp:"2024-03-23 15:30:00",username:"李四",department:"研发部-后端组",prompt:"数据中心，服务器机房，科技感，蓝色光效，网络连接",model:"Midjourney",resolution:"1024x1024",status:"saved",style:"sketch",remainingDays:30,imageUrl:"https://images.unsplash.com/photo-1558494949-ef010cbdcc31"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{goBack(){"/admin"!==this.$route.path&&this.$router.push("/admin")},goHome(){"/"!==this.$route.path&&this.$router.push("/")},handleSearch(){this.currentPage=1,this.fetchRecords()},resetFilter(){this.filterForm={dateRange:[],department:[],userId:"",prompt:"",style:""},this.handleSearch()},handleSizeChange(e){this.pageSize=e,this.fetchRecords()},handleCurrentChange(e){this.currentPage=e,this.fetchRecords()},formatDate(e,t,a){return a},async remoteSearchUsers(e){e&&(this.userSearchLoading=!0,setTimeout((()=>{this.userOptions=[{id:1,name:"张三",email:"zhangsan@example.com"},{id:2,name:"李四",email:"lisi@example.com"},{id:3,name:"王五",email:"wangwu@example.com"},{id:4,name:"赵六",email:"zhaoliu@example.com"}].filter((t=>t.name.includes(e))),this.userSearchLoading=!1}),500))},fetchRecords(){this.loading=!0,setTimeout((()=>{let e=[...this.imageRecords];if(this.filterForm.prompt&&(e=e.filter((e=>e.prompt.toLowerCase().includes(this.filterForm.prompt.toLowerCase())))),this.filterForm.userId){const t=this.userOptions.find((e=>e.id===this.filterForm.userId));t&&(e=e.filter((e=>e.username===t.name)))}if(this.filterForm.style&&(e=e.filter((e=>e.style===this.filterForm.style))),this.filterForm.dateRange&&2===this.filterForm.dateRange.length){const t=new Date(this.filterForm.dateRange[0]),a=new Date(this.filterForm.dateRange[1]);a.setHours(23,59,59,999),e=e.filter((e=>{const s=new Date(e.timestamp);return s>=t&&s<=a}))}this.total=e.length,this.loading=!1}),500)},previewImage(e){this.currentRecord=e,this.previewVisible=!0},downloadImage(e){e&&this.$message.success("图片下载中...")},deleteImage(e){this.$confirm(`确定要删除"${e.username}"的这张图片吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=this.imageRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.$set(this.imageRecords[t],"status","deleted"),this.$message.success("删除成功"))})).catch((()=>{}))},exportRecords(){this.$message({message:"导出功能开发中...",type:"info"})},getStatusType(e){const t={saved:"success",liked:"primary",deleted:"danger"};return t[e]||"info"},getStatusText(e){const t={saved:"已保存",liked:"已点赞",deleted:"已删除"};return t[e]||e},getStyleText(e){const t={realistic:"写实风格",cartoon:"卡通风格",oil:"油画风格",watercolor:"水彩风格",sketch:"素描风格"};return t[e]||e},handleSelectionChange(e){this.selectedImages=e},handleBatchDelete(){0!==this.selectedImages.length?this.$confirm(`确认要批量删除选中的 ${this.selectedImages.length} 张图片吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=this.selectedImages.map((e=>e.id));this.imageRecords=this.imageRecords.filter((t=>!e.includes(t.id))),this.$message.success(`成功删除${e.length}张图片`),this.selectedImages=[]})).catch((()=>{})):this.$message.warning("请选择要删除的图片")},resetSaveTime(e){this.$confirm("确认要重置此图片的保存时间吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((()=>{e.remainingDays=30,this.$message.success("保存时间已重置为30天")})).catch((()=>{}))}},created(){this.fetchRecords()}}),r=l,n=a(1656),o=(0,n.A)(r,s,i,!1,null,"f024d1b4",null),c=o.exports}}]);
//# sourceMappingURL=671.5f0dfe62.js.map