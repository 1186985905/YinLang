"use strict";(self["webpackChunkagentui"]=self["webpackChunkagentui"]||[]).push([[308],{27308:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-records"},[t("h1",[e._v(" 内容记录查询 "),t("div",{staticClass:"header-buttons"},[t("el-button",{attrs:{type:"default",size:"small",icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回管理面板")]),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-home"},on:{click:e.goHome}},[e._v("返回主页")])],1)]),t("el-card",{staticClass:"filter-card"},[t("el-form",{staticClass:"filter-form",attrs:{inline:!0,model:e.filterForm,size:"small"}},[t("el-form-item",{attrs:{label:"时间范围"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.filterForm.dateRange,callback:function(t){e.$set(e.filterForm,"dateRange",t)},expression:"filterForm.dateRange"}})],1),t("el-form-item",{attrs:{label:"部门"}},[t("el-cascader",{attrs:{options:e.departmentOptions,props:{checkStrictly:!0},clearable:"",placeholder:"请选择部门"},model:{value:e.filterForm.department,callback:function(t){e.$set(e.filterForm,"department",t)},expression:"filterForm.department"}})],1),t("el-form-item",{attrs:{label:"用户"}},[t("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteSearchUsers,loading:e.userSearchLoading,clearable:""},model:{value:e.filterForm.userId,callback:function(t){e.$set(e.filterForm,"userId",t)},expression:"filterForm.userId"}},e._l(e.userOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[t("span",[e._v(e._s(a.name))]),t("span",{staticClass:"user-email"},[e._v(e._s(a.email))])])})),1)],1),t("el-form-item",{attrs:{label:"内容搜索"}},[t("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.resetFilter}},[e._v("重置")]),t("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportRecords}},[e._v("导出")])],1)],1)],1),t("el-card",{staticClass:"table-card"},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("对话记录列表")]),t("el-radio-group",{attrs:{size:"small"},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}},[t("el-radio-button",{attrs:{label:"table"}},[e._v("表格视图")]),t("el-radio-button",{attrs:{label:"detail"}},[e._v("详细视图")])],1)],1),"table"===e.viewMode?[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.recordsList}},[t("el-table-column",{attrs:{prop:"timestamp",label:"时间",width:"180",formatter:e.formatDate}}),t("el-table-column",{attrs:{prop:"department",label:"部门",width:"120"}}),t("el-table-column",{attrs:{prop:"username",label:"用户",width:"120"}}),t("el-table-column",{attrs:{prop:"question",label:"问题","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.viewDetail(a.row)}}},[e._v(" 查看详情 ")])]}}],null,!1,2805759184)})],1)]:[t("div",{staticClass:"detail-list"},e._l(e.recordsList,(function(a){return t("div",{key:a.id,staticClass:"detail-item"},[t("div",{staticClass:"detail-header"},[t("div",{staticClass:"detail-info"},[t("span",{staticClass:"time"},[e._v(e._s(e.formatDate(null,null,a.timestamp)))]),t("el-tag",{attrs:{size:"small",type:"info"}},[e._v(e._s(a.department))]),t("span",{staticClass:"username"},[e._v(e._s(a.username))])],1),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.copyContent(a)}}},[e._v("复制内容")])],1),t("div",{staticClass:"conversation"},[t("div",{staticClass:"question"},[t("div",{staticClass:"avatar user"},[e._v("用户")]),t("div",{staticClass:"content"},[e._v(e._s(a.question))])]),t("div",{staticClass:"answer"},[t("div",{staticClass:"avatar assistant"},[e._v("AI")]),t("div",{staticClass:"content"},[e._v(e._s(a.answer))])])])])})),0)],t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),t("el-dialog",{attrs:{title:"对话详情",visible:e.dialogVisible,width:"600px","custom-class":"detail-dialog"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.currentRecord?[t("div",{staticClass:"dialog-header-info"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("时间：")]),t("span",[e._v(e._s(e.formatDate(null,null,e.currentRecord.timestamp)))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("部门：")]),t("span",[e._v(e._s(e.currentRecord.department))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"label"},[e._v("用户：")]),t("span",[e._v(e._s(e.currentRecord.username))])])]),t("div",{staticClass:"dialog-conversation"},[t("div",{staticClass:"dialog-message user"},[t("div",{staticClass:"message-header"},[e._v("问题：")]),t("div",{staticClass:"message-content"},[e._v(e._s(e.currentRecord.question))])]),t("div",{staticClass:"dialog-message assistant"},[t("div",{staticClass:"message-header"},[e._v("回答：")]),t("div",{staticClass:"message-content"},[e._v(e._s(e.currentRecord.answer))])])])]:e._e()],2)],1)},i=[],l=(a(44114),{name:"ContentRecords",data(){return{loading:!1,userSearchLoading:!1,viewMode:"table",currentPage:1,pageSize:10,total:0,dialogVisible:!1,currentRecord:null,filterForm:{dateRange:[],department:[],userId:"",keyword:""},departmentOptions:[{value:1,label:"研发部",children:[{value:4,label:"前端组"},{value:5,label:"后端组"}]},{value:2,label:"产品部"},{value:3,label:"运营部"}],userOptions:[],recordsList:[{id:1,timestamp:"2024-03-20 10:30:00",department:"研发部-前端组",username:"张三",question:"如何优化React组件的性能？",answer:"优化React组件性能可以从以下几个方面入手：1. 使用React.memo()避免不必要的重渲染 2. 合理使用useMemo和useCallback 3. 使用虚拟列表处理长列表 4. 避免内联对象和函数..."},{id:2,timestamp:"2024-03-20 11:15:00",department:"研发部-后端组",username:"李四",question:"如何处理Node.js中的内存泄漏问题？",answer:"处理Node.js内存泄漏可以：1. 使用heapdump分析内存快照 2. 避免闭包造成的引用无法释放 3. 及时清理定时器和事件监听器 4. 使用WeakMap/WeakSet处理对象引用..."}],pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{goBack(){"/admin"!==this.$route.path&&this.$router.push("/admin")},goHome(){"/"!==this.$route.path&&this.$router.push("/")},handleSearch(){this.currentPage=1,this.fetchRecords()},resetFilter(){this.filterForm={dateRange:[],department:[],userId:"",keyword:""},this.handleSearch()},handleSizeChange(e){this.pageSize=e,this.fetchRecords()},handleCurrentChange(e){this.currentPage=e,this.fetchRecords()},formatDate(e,t,a){return a},viewDetail(e){this.currentRecord=e,this.dialogVisible=!0},copyContent(e){const t=`问题：${e.question}\n\n回答：${e.answer}`;navigator.clipboard.writeText(t).then((()=>{this.$message.success("内容已复制到剪贴板")})).catch((()=>{this.$message.error("复制失败，请手动复制")}))},async remoteSearchUsers(e){e&&(this.userSearchLoading=!0,setTimeout((()=>{this.userOptions=[{id:1,name:"张三",email:"zhangsan@example.com"},{id:2,name:"李四",email:"lisi@example.com"}].filter((t=>t.name.includes(e))),this.userSearchLoading=!1}),500))},fetchRecords(){this.loading=!0,setTimeout((()=>{this.total=this.recordsList.length,this.loading=!1}),500)},exportRecords(){this.$message({message:"导出功能开发中...",type:"info"})}},created(){this.fetchRecords()}}),r=l,n=a(81656),o=(0,n.A)(r,s,i,!1,null,"07f628ec",null),c=o.exports}}]);
//# sourceMappingURL=308.b18f90f4.js.map