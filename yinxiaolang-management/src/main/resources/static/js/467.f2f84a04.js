"use strict";(self["webpackChunkagentui"]=self["webpackChunkagentui"]||[]).push([[467],{89467:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"prompt-config"},[e("h1",[t._v(" 提示词配置 "),e("div",{staticClass:"header-buttons"},[e("el-button",{attrs:{type:"default",size:"small",icon:"el-icon-back"},on:{click:t.goBack}},[t._v("返回管理面板")]),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-home"},on:{click:t.goHome}},[t._v("返回主页")])],1)]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-card",{staticClass:"department-card"},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("部门列表")]),e("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.showAddDeptDialog}},[t._v("添加部门")])],1),e("el-tree",{attrs:{data:t.departments,props:t.defaultProps,"highlight-current":!0,"node-key":"id","default-expand-all":""},on:{"node-click":t.handleDeptSelect},scopedSlots:t._u([{key:"default",fn:function({node:i,data:o}){return e("span",{staticClass:"custom-tree-node"},[e("span",[t._v(t._s(i.label))]),e("span",{staticClass:"actions"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.editDepartment(o)}}},[e("i",{staticClass:"el-icon-edit"})]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.removeDepartment(i,o)}}},[e("i",{staticClass:"el-icon-delete"})])],1)])}}])})],1)],1),e("el-col",{attrs:{span:18}},[e("el-card",{staticClass:"prompt-card"},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.currentDept?t.currentDept.label+" - 提示词列表":"请选择部门"))]),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:!t.currentDept},on:{click:t.showAddPromptDialog}},[t._v(" 添加提示词 ")])],1),t.currentDept?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.promptList}},[e("el-table-column",{attrs:{prop:"title",label:"标题",width:"200"}}),e("el-table-column",{attrs:{prop:"content",label:"提示词内容"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"prompt-content"},[t._v(t._s(i.row.content))])]}}],null,!1,3876841598)}),e("el-table-column",{attrs:{prop:"category",label:"分类",width:"120"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(i.row.category))])]}}],null,!1,2477035928)}),e("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.editPrompt(i.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.removePrompt(i.$index)}}},[t._v("删除")])]}}],null,!1,1040033866)})],1):e("div",{staticClass:"empty-state"},[e("i",{staticClass:"el-icon-document"}),e("p",[t._v("请先选择左侧部门来管理提示词")])])],1)],1)],1),e("el-dialog",{attrs:{title:"add"===t.deptDialogType?"添加部门":"编辑部门",visible:t.deptDialogVisible,width:"500px"},on:{"update:visible":function(e){t.deptDialogVisible=e}}},[e("el-form",{ref:"deptForm",attrs:{model:t.deptForm,rules:t.deptRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:t.deptForm.name,callback:function(e){t.$set(t.deptForm,"name",e)},expression:"deptForm.name"}})],1),e("el-form-item",{attrs:{label:"上级部门"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择上级部门"},model:{value:t.deptForm.parentId,callback:function(e){t.$set(t.deptForm,"parentId",e)},expression:"deptForm.parentId"}},[e("el-option",{attrs:{label:"无",value:0}}),t._l(t.flatDepartments,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],2)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.deptDialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveDepartment}},[t._v("确定")])],1)],1),e("el-dialog",{attrs:{title:"add"===t.promptDialogType?"添加提示词":"编辑提示词",visible:t.promptDialogVisible,width:"650px"},on:{"update:visible":function(e){t.promptDialogVisible=e}}},[e("el-form",{ref:"promptForm",attrs:{model:t.promptForm,rules:t.promptRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{attrs:{placeholder:"请输入提示词标题"},model:{value:t.promptForm.title,callback:function(e){t.$set(t.promptForm,"title",e)},expression:"promptForm.title"}})],1),e("el-form-item",{attrs:{label:"分类",prop:"category"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分类"},model:{value:t.promptForm.category,callback:function(e){t.$set(t.promptForm,"category",e)},expression:"promptForm.category"}},[e("el-option",{attrs:{label:"常用提示",value:"common"}}),e("el-option",{attrs:{label:"工作流程",value:"workflow"}}),e("el-option",{attrs:{label:"专业知识",value:"professional"}}),e("el-option",{attrs:{label:"其他",value:"other"}})],1)],1),e("el-form-item",{attrs:{label:"内容",prop:"content"}},[e("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入提示词内容"},model:{value:t.promptForm.content,callback:function(e){t.$set(t.promptForm,"content",e)},expression:"promptForm.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.promptDialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.savePrompt}},[t._v("确定")])],1)],1)],1)},r=[],l=(i(44114),i(18111),i(7588),i(13579),{name:"PromptConfig",data(){return{loading:!1,departments:[{id:1,label:"研发部",children:[{id:4,label:"前端组"},{id:5,label:"后端组"}]},{id:2,label:"产品部"},{id:3,label:"运营部"}],defaultProps:{children:"children",label:"label"},currentDept:null,promptList:[{id:1,title:"代码审查提示",content:"请帮我检查这段代码可能存在的问题，包括但不限于：性能优化、安全隐患、代码规范等方面。",category:"工作流程"},{id:2,title:"API文档生成",content:"请根据以下接口信息，生成标准的API文档，包含接口描述、请求参数、响应参数等内容。",category:"专业知识"}],deptDialogVisible:!1,deptDialogType:"add",deptForm:{name:"",parentId:0},deptRules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},promptDialogVisible:!1,promptDialogType:"add",promptForm:{title:"",content:"",category:""},promptRules:{title:[{required:!0,message:"请输入提示词标题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],content:[{required:!0,message:"请输入提示词内容",trigger:"blur"},{min:10,max:2e3,message:"长度在 10 到 2000 个字符",trigger:"blur"}]}}},computed:{flatDepartments(){const t=[],e=i=>{i.forEach((i=>{i.id!==this.currentDept?.id&&(t.push(i),i.children&&e(i.children))}))};return e(this.departments),t}},methods:{goBack(){"/admin"!==this.$route.path&&this.$router.push("/admin")},goHome(){"/"!==this.$route.path&&this.$router.push("/")},handleDeptSelect(t){this.currentDept=t,this.fetchPromptList()},showAddDeptDialog(){this.deptDialogType="add",this.deptForm={name:"",parentId:0},this.deptDialogVisible=!0},editDepartment(t){this.deptDialogType="edit",this.deptForm={id:t.id,name:t.label,parentId:this.getDeptParentId(t)},this.deptDialogVisible=!0},getDeptParentId(t){let e=0;const i=o=>{for(const r of o){if(r.children&&r.children.some((e=>e.id===t.id))){e=r.id;break}r.children&&i(r.children)}};return i(this.departments),e},removeDepartment(t,e){this.$confirm("确认删除该部门吗？删除后该部门下的所有提示词将被删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=i=>{for(let o=0;o<i.length;o++){if(i[o].id===e.id){i.splice(o,1);break}i[o].children&&t(i[o].children)}};t(this.departments),this.$message.success("部门删除成功")})).catch((()=>{}))},saveDepartment(){this.$refs.deptForm.validate((t=>{t&&(this.$message.success("add"===this.deptDialogType?"部门添加成功":"部门更新成功"),this.deptDialogVisible=!1)}))},showAddPromptDialog(){this.currentDept?(this.promptDialogType="add",this.promptForm={title:"",content:"",category:""},this.promptDialogVisible=!0):this.$message.warning("请先选择部门")},editPrompt(t){this.promptDialogType="edit",this.promptForm={...t},this.promptDialogVisible=!0},removePrompt(t){this.$confirm("确认删除该提示词吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.promptList.splice(t,1),this.$message.success("提示词删除成功")})).catch((()=>{}))},savePrompt(){this.$refs.promptForm.validate((t=>{if(t){if("add"===this.promptDialogType)this.promptList.push({id:Date.now(),...this.promptForm});else{const t=this.promptList.findIndex((t=>t.id===this.promptForm.id));-1!==t&&(this.promptList[t]={...this.promptForm})}this.$message.success("add"===this.promptDialogType?"提示词添加成功":"提示词更新成功"),this.promptDialogVisible=!1}}))},fetchPromptList(){this.currentDept&&(this.loading=!0,setTimeout((()=>{this.loading=!1}),500))}}}),a=l,s=i(81656),n=(0,s.A)(a,o,r,!1,null,"6ea9b804",null),p=n.exports}}]);
//# sourceMappingURL=467.f2f84a04.js.map