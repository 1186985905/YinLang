{"version":3,"file":"js/406.6454cd55.js","mappings":"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","sources":["webpack://agentui/./src/views/admin/LogViewer.vue","webpack://agentui/src/views/admin/LogViewer.vue","webpack://agentui/./src/views/admin/LogViewer.vue?4995","webpack://agentui/./src/views/admin/LogViewer.vue?5765"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"log-viewer\"},[_c('h1',[_vm._v(\" 系统日志查看 \"),_c('div',{staticClass:\"header-buttons\"},[_c('el-button',{attrs:{\"type\":\"default\",\"size\":\"small\",\"icon\":\"el-icon-back\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回管理面板\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-s-home\"},on:{\"click\":_vm.goHome}},[_vm._v(\"返回主页\")])],1)]),_c('el-card',{staticClass:\"filter-card\"},[_c('div',{staticClass:\"filter-section\"},[_c('el-form',{staticClass:\"filter-form\",attrs:{\"inline\":true,\"model\":_vm.filterForm}},[_c('el-form-item',{attrs:{\"label\":\"时间范围\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":_vm.pickerOptions},on:{\"change\":_vm.handleDateChange},model:{value:(_vm.filterForm.dateRange),callback:function ($$v) {_vm.$set(_vm.filterForm, \"dateRange\", $$v)},expression:\"filterForm.dateRange\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\",\"clearable\":\"\"},on:{\"clear\":_vm.handleFilter},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleFilter.apply(null, arguments)}},model:{value:(_vm.filterForm.username),callback:function ($$v) {_vm.$set(_vm.filterForm, \"username\", $$v)},expression:\"filterForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"操作类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"clearable\":\"\"},on:{\"change\":_vm.handleFilter},model:{value:(_vm.filterForm.actionType),callback:function ($$v) {_vm.$set(_vm.filterForm, \"actionType\", $$v)},expression:\"filterForm.actionType\"}},[_c('el-option',{attrs:{\"label\":\"登录/登出\",\"value\":\"login_logout\"}}),_c('el-option',{attrs:{\"label\":\"文本对话\",\"value\":\"text_chat\"}}),_c('el-option',{attrs:{\"label\":\"图像生成\",\"value\":\"image_generation\"}}),_c('el-option',{attrs:{\"label\":\"模型配置\",\"value\":\"model_config\"}}),_c('el-option',{attrs:{\"label\":\"用户管理\",\"value\":\"user_management\"}}),_c('el-option',{attrs:{\"label\":\"对话记录删除\",\"value\":\"chat_delete\"}}),_c('el-option',{attrs:{\"label\":\"图片删除\",\"value\":\"image_delete\"}}),_c('el-option',{attrs:{\"label\":\"提示词配置\",\"value\":\"prompt_config\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.resetFilter}},[_vm._v(\"重置\")])],1)],1)],1)]),_c('el-card',{staticClass:\"log-table-card\"},[_c('div',{staticClass:\"card-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"操作日志列表\")]),_c('div',{staticClass:\"header-actions\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.exportLogs}},[_vm._v(\"导出日志\")])],1)]),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.logData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"timestamp\",\"label\":\"时间\",\"width\":\"180\",\"formatter\":_vm.formatDate}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"action\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getActionTagType(scope.row.action)}},[_vm._v(\" \"+_vm._s(_vm.getActionName(scope.row.action))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"ip\",\"label\":\"IP地址\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"device\",\"label\":\"设备信息\"}})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"log-viewer\">\n    <h1>\n      系统日志查看\n      <div class=\"header-buttons\">\n        <el-button type=\"default\" size=\"small\" icon=\"el-icon-back\" @click=\"goBack\">返回管理面板</el-button>\n        <el-button type=\"primary\" size=\"small\" icon=\"el-icon-s-home\" @click=\"goHome\">返回主页</el-button>\n      </div>\n    </h1>\n\n    <el-card class=\"filter-card\">\n      <div class=\"filter-section\">\n        <el-form :inline=\"true\" :model=\"filterForm\" class=\"filter-form\">\n          <el-form-item label=\"时间范围\">\n            <el-date-picker\n              v-model=\"filterForm.dateRange\"\n              type=\"daterange\"\n              range-separator=\"至\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              @change=\"handleDateChange\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"用户名\">\n            <el-input\n              v-model=\"filterForm.username\"\n              placeholder=\"请输入用户名\"\n              clearable\n              @clear=\"handleFilter\"\n              @keyup.enter.native=\"handleFilter\">\n            </el-input>\n          </el-form-item>\n          <el-form-item label=\"操作类型\">\n            <el-select v-model=\"filterForm.actionType\" placeholder=\"请选择\" clearable @change=\"handleFilter\">\n              <el-option label=\"登录/登出\" value=\"login_logout\"></el-option>\n              <el-option label=\"文本对话\" value=\"text_chat\"></el-option>\n              <el-option label=\"图像生成\" value=\"image_generation\"></el-option>\n              <el-option label=\"模型配置\" value=\"model_config\"></el-option>\n              <el-option label=\"用户管理\" value=\"user_management\"></el-option>\n              <el-option label=\"对话记录删除\" value=\"chat_delete\"></el-option>\n              <el-option label=\"图片删除\" value=\"image_delete\"></el-option>\n              <el-option label=\"提示词配置\" value=\"prompt_config\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" @click=\"resetFilter\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n\n    <el-card class=\"log-table-card\">\n      <div slot=\"header\" class=\"card-header\">\n        <span>操作日志列表</span>\n        <div class=\"header-actions\">\n          <el-button type=\"primary\" size=\"small\" icon=\"el-icon-download\" @click=\"exportLogs\">导出日志</el-button>\n        </div>\n      </div>\n      \n      <el-table\n        :data=\"logData\"\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n        border>\n        <el-table-column\n          prop=\"timestamp\"\n          label=\"时间\"\n          width=\"180\"\n          :formatter=\"formatDate\">\n        </el-table-column>\n        <el-table-column\n          prop=\"username\"\n          label=\"用户名\"\n          width=\"150\">\n        </el-table-column>\n        <el-table-column\n          prop=\"action\"\n          label=\"操作\"\n          width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"getActionTagType(scope.row.action)\">\n              {{ getActionName(scope.row.action) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"ip\"\n          label=\"IP地址\"\n          width=\"150\">\n        </el-table-column>\n        <el-table-column\n          prop=\"device\"\n          label=\"设备信息\">\n        </el-table-column>\n      </el-table>\n\n      <div class=\"pagination-container\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n        </el-pagination>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LogViewer',\n  data() {\n    return {\n      loading: false,\n      filterForm: {\n        dateRange: [],\n        username: '',\n        actionType: ''\n      },\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      logData: [\n        {\n          id: 1,\n          timestamp: '2024-03-20 09:30:00',\n          username: 'admin',\n          action: 'login',\n          ip: '192.168.1.100',\n          device: 'Chrome 122.0.0 / Windows 10'\n        },\n        {\n          id: 2,\n          timestamp: '2024-03-20 10:15:00',\n          username: 'user1',\n          action: 'text_chat',\n          ip: '192.168.1.101',\n          device: 'Safari / MacOS'\n        },\n        {\n          id: 3,\n          timestamp: '2024-03-20 11:20:00',\n          username: 'user2',\n          action: 'image_generation',\n          ip: '192.168.1.102',\n          device: 'Firefox / Ubuntu'\n        },\n        {\n          id: 4,\n          timestamp: '2024-03-20 12:45:00',\n          username: 'admin',\n          action: 'model_add',\n          ip: '192.168.1.100',\n          device: 'Chrome 122.0.0 / Windows 10'\n        },\n        {\n          id: 5,\n          timestamp: '2024-03-20 13:30:00',\n          username: 'admin',\n          action: 'user_update',\n          ip: '192.168.1.100',\n          device: 'Chrome 122.0.0 / Windows 10'\n        },\n        {\n          id: 6,\n          timestamp: '2024-03-20 15:20:00',\n          username: 'admin',\n          action: 'logout',\n          ip: '192.168.1.100',\n          device: 'Chrome 122.0.0 / Windows 10'\n        },\n        {\n          id: 7,\n          timestamp: '2024-03-20 16:10:00',\n          username: 'user1',\n          action: 'prompt_config',\n          ip: '192.168.1.101',\n          device: 'Safari / MacOS'\n        },\n        {\n          id: 8,\n          timestamp: '2024-03-20 17:00:00',\n          username: 'user2',\n          action: 'image_delete',\n          ip: '192.168.1.102',\n          device: 'Firefox / Ubuntu'\n        }\n      ],\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近三个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n            picker.$emit('pick', [start, end]);\n          }\n        }]\n      }\n    }\n  },\n  methods: {\n    goBack() {\n      this.$router.push('/admin');\n    },\n    goHome() {\n      this.$router.push('/');\n    },\n    formatDate(row) {\n      return row.timestamp;\n    },\n    handleFilter() {\n      this.currentPage = 1;\n      this.fetchLogs();\n    },\n    resetFilter() {\n      this.filterForm = {\n        dateRange: [],\n        username: '',\n        actionType: ''\n      };\n      this.handleFilter();\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.fetchLogs();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchLogs();\n    },\n    handleDateChange() {\n      this.handleFilter();\n    },\n    fetchLogs() {\n      this.loading = true;\n      \n      // 模拟API调用\n      setTimeout(() => {\n        let filteredLogs = [...this.logData];\n        \n        if (this.filterForm.username) {\n          filteredLogs = filteredLogs.filter(log => \n            log.username.toLowerCase().includes(this.filterForm.username.toLowerCase())\n          );\n        }\n        \n        if (this.filterForm.actionType) {\n          // 处理合并后的操作类型过滤\n          if (this.filterForm.actionType === 'login_logout') {\n            filteredLogs = filteredLogs.filter(log => \n              log.action === 'login' || log.action === 'logout'\n            );\n          } else if (this.filterForm.actionType === 'model_config') {\n            filteredLogs = filteredLogs.filter(log => \n              log.action === 'model_add' || log.action === 'model_update' || log.action === 'model_delete'\n            );\n          } else if (this.filterForm.actionType === 'user_management') {\n            filteredLogs = filteredLogs.filter(log => \n              log.action === 'user_add' || log.action === 'user_update' || log.action === 'user_delete'\n            );\n          } else {\n            filteredLogs = filteredLogs.filter(log => log.action === this.filterForm.actionType);\n          }\n        }\n        \n        if (this.filterForm.dateRange && this.filterForm.dateRange.length === 2) {\n          const startDate = new Date(this.filterForm.dateRange[0]);\n          const endDate = new Date(this.filterForm.dateRange[1]);\n          endDate.setHours(23, 59, 59, 999); // 设置为当天结束时间\n          \n          filteredLogs = filteredLogs.filter(log => {\n            const logDate = new Date(log.timestamp);\n            return logDate >= startDate && logDate <= endDate;\n          });\n        }\n        \n        this.total = filteredLogs.length;\n        this.logData = filteredLogs;\n        this.loading = false;\n      }, 500);\n    },\n    exportLogs() {\n      // 实现导出日志功能\n      this.$message({\n        message: '日志导出功能开发中...',\n        type: 'info'\n      });\n    },\n    getActionTagType(action) {\n      const types = {\n        login: 'success',\n        logout: 'success',\n        text_chat: 'primary',\n        image_generation: 'warning',\n        model_add: 'success',\n        model_update: 'warning',\n        model_delete: 'danger',\n        user_add: 'success',\n        user_update: 'warning',\n        user_delete: 'danger',\n        chat_delete: 'danger',\n        image_delete: 'danger',\n        prompt_config: 'info'\n      };\n      return types[action] || 'info';\n    },\n    getActionName(action) {\n      const names = {\n        login: '登录/登出',\n        logout: '登录/登出',\n        text_chat: '文本对话',\n        image_generation: '图像生成',\n        model_add: '模型配置',\n        model_update: '模型配置',\n        model_delete: '模型配置',\n        user_add: '用户管理',\n        user_update: '用户管理',\n        user_delete: '用户管理',\n        chat_delete: '对话记录删除',\n        image_delete: '图片删除',\n        prompt_config: '提示词配置'\n      };\n      return names[action] || action;\n    }\n  },\n  created() {\n    this.fetchLogs();\n  }\n}\n</script>\n\n<style scoped>\n.log-viewer {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh1 {\n  font-size: 24px;\n  color: #333;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.filter-card {\n  margin-bottom: 20px;\n}\n\n.filter-section {\n  padding: 10px;\n}\n\n.filter-form {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.log-table-card {\n  margin-bottom: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n@media screen and (max-width: 768px) {\n  .log-viewer {\n    padding: 10px;\n  }\n\n  .filter-form {\n    flex-direction: column;\n  }\n\n  .filter-form .el-form-item {\n    margin-right: 0;\n    margin-bottom: 10px;\n  }\n\n  .el-date-picker {\n    width: 100%;\n  }\n}\n</style> ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LogViewer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LogViewer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LogViewer.vue?vue&type=template&id=7f3aac43&scoped=true\"\nimport script from \"./LogViewer.vue?vue&type=script&lang=js\"\nexport * from \"./LogViewer.vue?vue&type=script&lang=js\"\nimport style0 from \"./LogViewer.vue?vue&type=style&index=0&id=7f3aac43&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f3aac43\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","goBack","goHome","filterForm","pickerOptions","handleDateChange","model","value","dateRange","callback","$$v","$set","expression","handleFilter","nativeOn","$event","type","indexOf","_k","keyCode","key","apply","arguments","username","actionType","resetFilter","slot","exportLogs","directives","name","rawName","loading","staticStyle","logData","formatDate","scopedSlots","_u","fn","scope","getActionTagType","row","action","_s","getActionName","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","data","id","timestamp","ip","device","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","methods","$router","push","fetchLogs","val","setTimeout","filteredLogs","filter","log","toLowerCase","includes","length","startDate","endDate","setHours","logDate","$message","message","types","login","logout","text_chat","image_generation","model_add","model_update","model_delete","user_add","user_update","user_delete","chat_delete","image_delete","prompt_config","names","created","component"],"sourceRoot":""}